%h3 Информация о рейсе
%p
  %b Рейс:
  = @timetableap.flight
  - unless @timetableap.parent_id.blank?
    (Совмещён с рейсом #{@timetableap.parent.flight})
%p
  %b Перевозчик:
  %br/
  = @timetableap.aircompany.airline_name_rus
  (#{@timetableap.aircompany.airline_name_eng}, базовый аэропорт #{@timetableap.aircompany.airport.name_rus})
%table
  %tr
    %td
      %b Отправление:
    %td
      = @timetableap.airport_start.town.city_rus
      (#{@timetableap.airport_start.name_rus})
    %td= @timetableap.timeStart.in_time_zone(@timetableap.airport_start.time_zone)
  %tr
    %td
      %b Прибытие::
    %td
      = @timetableap.airport_finish.town.city_rus
      (#{@timetableap.airport_finish.name_rus})
    %td= @timetableap.timeEnd.in_time_zone(@timetableap.airport_finish.time_zone)
%p
  %b Время в пути:
  - if @timetableap.timeStart < @timetableap.timeEnd
    = Time.diff(Time.parse(@timetableap.timeStart.to_s), Time.parse(@timetableap.timeEnd.to_s), '%H %N')[:diff]
  - else
    - @timetableap.timeEnd = @timetableap.timeEnd + 24.hour
    = Time.diff(Time.parse(@timetableap.timeStart.to_s), Time.parse(@timetableap.timeEnd.to_s), '%H %N')[:diff]
%p
  %b Статус:
  - if @timetableap.timeStart < Time.zone.now and @timetableap.timeEnd < Time.zone.now
    Прибыл в #{@timetableap.airport_finish.town.city_rus}
  - elsif @timetableap.timeStart < Time.zone.now and @timetableap.timeEnd > Time.zone.now
    В полёте.
  - else
    Ожидает.
%p
  %b Type of plane:
  = @timetableap.aircraft.aircraft_model if @timetableap.aircraft
%p
  %b Выполняется самолётом авиакомпании
  = (@timetableap.parent_id.blank?) ? (link_to @timetableap.aircompany.airline_name_rus, @timetableap.aircompany) : (link_to @timetableap.parent.aircompany.airline_name_rus, @timetableap.parent.aircompany)
%p
  %a{:href => ""} Другие рейсы по данному направлению.
