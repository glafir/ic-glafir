<div id="new_tt">
<script type="text/javascript">
$(document).ready(function () {
  $("#new_timetableap").validate({
    focusInvalid: false,
    focusCleanup: true,
    rules: {
      "timetableap[Flight_Number]": {required: true, number: true, maxlength: 4},
      "timetableap[DateOfStartNav]": {required: true, maxlength: 8, number: true},
      "timetableap[DateOfEndNav]": {required: true, number: true, maxlength: 8 }
    },
    messages: {
        "timetableap[Flight_Number]": "Введите номер рейса",
        "timetableap[DateOfStartNav]": "Введите дату начала навигации",
        "timetableap[DateOfEndNav]": "Введите дату конца навигации"
      }
    });
  });
</script>

<%= form_for(@timetableap) do |f| %>
  <% if @timetableap.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@timetableap.errors.count, "error") %> prohibited this timetableap from being saved:</h2>
      <ul>
      <% @timetableap.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :Flight_Number %><br />
    <%if params[:Flight_Number].blank? %>
    <%= f.number_field :Flight_Number %>
    <% else %>
    <%= f.number_field :Flight_Number, :value => (params[:Flight_Number]).to_i + 1, disabled: true %>
  <% end %>
  </div>
  <div class="field">
    <%= f.label :aircompany_airline_name_rus %><br />
    <%if params[:aircompany_id].blank? %>
    <%#= f.text_field :aircompany_airline_name_rus, data: {autocomplete_source: aircompanies_path}  %>
    <%= f.collection_select :aircompany_id, Aircompany.order(:airline_name_rus), :id, :airline_name_rus.to_s %>
  <% else %>
    <%= f.collection_select :aircompany_id, Aircompany.order(:airline_name_rus), :id, :airline_name_rus.to_s, prompt: true %>
  <% end %>
  </div>
  <div class="field">
    <%= f.label :way_start %><br />
	<%= f.select :way_start, Airport.where(iso_code: 'EZ').order(:name_rus).collect{|item| [item.name_rus, item.id]} %>
  </div>
  <div class="field">
    <%= f.label :way_end %><br />
    <%= f.select :way_end, Airport.where(iso_code: 'EZ').order(:name_rus).collect{|item| [item.name_rus, item.id]} %>
  </div>
  <div class="field">
    <%= f.label :TermStart %><br />
    <%= f.text_field :TermStart %>
  </div>
  <div class="field">
    <%= f.label :GateStart %><br />
    <%= f.text_field :GateStart %>
  </div>
  <div class="field">
    <%= f.label :TermEnd %><br />
    <%= f.text_field :TermEnd %>
  </div>
  <div class="field">
    <%= f.label :GateEnd %><br />
    <%= f.text_field :GateEnd %>
  </div>
  <div class="field">
    <%= f.label :TypeOfPlane %><br />
    <%= f.text_field :TypeOfPlane %>
  </div>
  <div class="field">
    <%= f.label :TimeStart %><br />
    <%= f.time_select :TimeStart, {minute_step: 5} %>
  </div>
  <div class="field">
    <%= f.label :TimeEnd %><br />
    <%= f.time_select :TimeEnd, {minute_step: 5} %>
  </div>
  <div class="field">
    <%= f.label :DateOfStartNav %><br />
    <%= f.text_field :DateOfStartNav, size: 8%>
  </div>
  <div class="field">
    <%= f.label :DateOfEndNav %><br />
    <%= f.text_field :DateOfEndNav,  size: 8, placeholder: "20130101"  %>
  </div>
  <div class="field">
    <%= f.label "Mon" %><br />
    <%= f.check_box(:s1, options = {}, checked_value = "1", unchecked_value = "0") %>
    <%= f.check_box(:e1, options = {}, checked_value = "1", unchecked_value = "0") %>
  </div>
  <div class="field">
    <%= f.label "Tue" %><br />
    <%= f.check_box(:s2, options = {}, checked_value = "1", unchecked_value = "0") %>
    <%= f.check_box(:e2, options = {}, checked_value = "1", unchecked_value = "0") %>
  </div>
  <div class="field">
    <%= f.label "Wen" %><br />
    <%= f.check_box(:s3, options = {}, checked_value = "1", unchecked_value = "0") %>
    <%= f.check_box(:e3, options = {}, checked_value = "1", unchecked_value = "0") %>
  </div>
  <div class="field">
    <%= f.label "The" %><br />
    <%= f.check_box(:s4, options = {}, checked_value = "1", unchecked_value = "0") %>
    <%= f.check_box(:e4, options = {}, checked_value = "1", unchecked_value = "0") %>
  </div>
  <div class="field">
    <%= f.label "Fri" %><br />
    <%= f.check_box(:s5, options = {}, checked_value = "1", unchecked_value = "0") %>
    <%= f.check_box(:e5, options = {}, checked_value = "1", unchecked_value = "0") %>
  </div>
  <div class="field">
    <%= f.label "Sat" %><br />
    <%= f.check_box(:s6, options = {}, checked_value = "1", unchecked_value = "0") %>
    <%= f.check_box(:e6, options = {}, checked_value = "1", unchecked_value = "0") %>
  </div>
  <div class="field">
    <%= f.label "Sun" %><br />
    <%= f.check_box(:s0, options = {}, checked_value = "1", unchecked_value = "0") %>
    <%= f.check_box(:e0, options = {}, checked_value = "1", unchecked_value = "0") %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
</div>
