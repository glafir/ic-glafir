
:javascript
  $(document).ready(function(){
  setInterval(foo, 60000);
  foo();
  function foo () {
  $('#tda').load("# #tt", function() {
    $("#tt").tablesorter({
      widgets: ["zebra"],
      sortList:[[1,0]]
      });
    });}
  });
%h4= @tablo
.tablo_buttron
  %a{:href => "/airports/#{@airport.id}/tablo/out", :class => 'btn btn-primary'} вылет
  %a{:href => "/airports/#{@airport.id}/tablo/in", :class => 'btn btn-primary'} прилёт
  %a{:href => "/airports/#{@airport.id}/tablo", :class => 'btn btn-primary'} Общее
= form_tag "#", :remote => 'true', :method => 'get', :id => "timetableaps_search"  do
  #tablo_form
    = label_tag :aircomapny, "Авиакомпания:"
    = select_tag "search_al", options_from_collection_for_select(@airlines.order("airline_name_rus"), :id, :airline_name_rus, params[:search_al]), prompt: "All Airlines", :onchange => "this.form.submit();"
    = select_tag "start_time", options_for_select((Time.now.in_time_zone(@airport.time_zone).beginning_of_day.to_i..(Time.now.in_time_zone(@airport.time_zone).end_of_day).to_i).step(1.hour).collect {|x| [Time.at(x).to_s(:time), Time.at(x).utc] } ,params[:start_time]), :onchange => "this.form.submit();"
    = select_tag "end_time", options_for_select(((Time.now.in_time_zone(@airport.time_zone).beginning_of_day+1.hour).to_i..(Time.now.in_time_zone(@airport.time_zone).beginning_of_day+1.day).to_i).step(1.hour).collect {|x| [Time.at(x).to_s(:time), Time.at(x).utc] } ,params[:end_time]), :onchange => "this.form.submit();"
, params[:search_al]), prompt: "All Airlines", :onchange => "this.form.submit();"
#tda.table-responsive
  %table#tt.tablesorter.table.table-striped.table-hover.table-condensed
    %thead
      %tr
        %th Рейс
        %th Направление
        %th Время
        %th Статус
    %tbody
      = render "airports/tablo.mobile"
    %tbody
